(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();const r=window.matchMedia("(min-width: 1024px)"),ke=window.matchMedia("(min-width: 768px)"),je=20,j={empty:"Это обязательное поле.",email:"Неверный формат email.",default:"Неверный формат данных"},ae={email:/^[\p{L}\p{N}._%+-]+@[\p{L}\p{N}.-]+\.([\p{L}]{2,}|xn--[a-z0-9-]+)$/u},m=document.querySelector(".header"),de=m?m.querySelector(".user-nav"):null,Ge=m?m.querySelector(".header__top"):null,P=m?m.querySelector(".main-nav__menu"):null,G=m?m.querySelector(".main-nav__user"):null,ue=P?P.querySelector(".theme"):null;let T=!1;const qe=()=>{m&&r.matches&&!T&&(Ge.appendChild(de),P.appendChild(ue),G.setAttribute("aria-hidden","true"),T=!0),m&&!r.matches&&T&&(G.appendChild(de),P.prepend(ue),G.removeAttribute("aria-hidden"),T=!1)};r.addEventListener("change",qe);const xe=e=>e.key==="Escape",Je=e=>e.key==="ArrowDown",Qe=e=>e.key==="ArrowUp",Ze=e=>e.key==="Enter",et=()=>{const e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",document.body.append(e);const t=e.offsetWidth-e.clientWidth;return e.remove(),t},Q=document.querySelector(".header"),d=Q?Q.querySelector(".main-nav"):null,tt=d?d.querySelector(".burger"):null,Z=d?d.querySelector(".menu"):null,Ce=Z?Z.querySelectorAll("a, button"):null;let fe=0;const ne=()=>{Z.setAttribute("tabindex","-1"),Ce.forEach(e=>{e.setAttribute("tabindex","-1")})},we=()=>{Ce.forEach(e=>{e.setAttribute("tabindex","0")})},nt=()=>{const e=Q.scrollHeight;d.style.setProperty("--header-height",`${e}px`)},st=()=>{d.classList.add("main-nav--opened"),document.body.style.overflow="hidden",document.addEventListener("keydown",Te),document.addEventListener("click",Ie),d.addEventListener("focusout",Me),we(),nt(),fe=et(),document.body.style.paddingRight=`${fe}px`},U=()=>{d.classList.remove("main-nav--opened"),document.body.style.overflow="visible",document.body.style.paddingRight=0,document.removeEventListener("keydown",Te),document.removeEventListener("click",Ie),d.removeEventListener("focusout",Me),ne()};function Te(e){xe(e)&&(e.preventDefault(),U())}function Me(e){(e.relatedTarget===null||!d.contains(e.relatedTarget))&&U()}function Ie(e){d.contains(e.target)||U()}r.matches||ne();r.addEventListener("change",()=>{r.matches?we():ne()});const ot=()=>{d&&tt.addEventListener("click",()=>{d.classList.contains("main-nav--opened")?U():st()})},ee=document.querySelector(".theme"),k=ee?ee.querySelector(".theme__toggle"):null,rt=()=>{ee&&k.addEventListener("click",()=>{k.classList.toggle("theme__toggle--dark"),k.classList.contains("theme__toggle--dark")?k.setAttribute("aria-pressed","true"):k.setAttribute("aria-pressed","false")})},De=(e,t)=>{const n=e.querySelector(".slider"),o=n.querySelector(".slider__list"),s=o.querySelectorAll(".slider__item"),c=n.querySelector(".slider-pagination"),l=c.querySelectorAll(".slider-pagination__button");let f=!1,_=0;const A=()=>{s.forEach(i=>{i.querySelectorAll("a").forEach(L=>{L.tabIndex=-1})}),o.querySelector(".slider-item-current").querySelectorAll("a").forEach(i=>{i.tabIndex=0})},x=()=>{s.forEach(i=>{i.querySelectorAll("a").forEach(L=>{L.tabIndex=0})})},a=()=>{n.classList.add("slider"),o.classList.add("slider__list")},y=()=>{n.classList.remove("slider"),o.classList.remove("slider__list")},C=i=>{n.querySelector(".slider-pagination__button--current").classList.remove("slider-pagination__button--current"),Array.from(l)[i].classList.add("slider-pagination__button--current")},z=i=>{const L=s[0].clientWidth+je;o.style.transform=`translateX(${-1*L*i}px)`},Y=i=>{o.querySelector(".slider-item-current").classList.remove("slider-item-current"),Array.from(s)[i].classList.add("slider-item-current"),A()},re=i=>{if(i.target.classList.contains("slider-pagination__button")){i.preventDefault();const L=i.target,b=Array.from(l).indexOf(L);Y(b),z(b),C(b)}},ce=i=>{_=i.touches[0].clientX},ie=i=>{const b=i.changedTouches[0].clientX-_,Ye=n.querySelector(".slider-pagination__button--current"),w=Array.from(l).indexOf(Ye);if(b<=0&&w<s.length-1){const E=w+1;Y(E),z(E),C(E)}if(b>0&&w>0){const E=w-1;Y(E),z(E),C(E)}},Ue=()=>{A(),a(),c.addEventListener("click",re),o.addEventListener("touchstart",ce),o.addEventListener("touchend",ie)},ze=()=>{x(),y(),c.removeEventListener("click",re),o.removeEventListener("touchstart",ce),o.removeEventListener("touchend",ie),o.style.transform="translateX(0)",C(0)},le=()=>{t.matches&&f?(ze(),f=!1):!t.matches&&!f&&(Ue(),f=!0)};t.addEventListener("change",le),le()},me=document.querySelector(".promo"),ct=()=>{me&&De(me,ke)},ve=document.querySelectorAll(".font-card"),it=()=>{ve&&ve.forEach(e=>{De(e,r)})},V=document.querySelector(".best-picks"),M=V?V.querySelectorAll(".font-card__button-open"):null;let I=!1;const se=()=>{V&&!r.matches&&document.querySelectorAll(".font-card__details--opened").forEach(t=>{t.style.maxHeight=`${t.scrollHeight}px`}),V&&r.matches&&document.querySelectorAll(".font-card__details--opened").forEach(t=>{t.style.maxHeight=0})},he=e=>{e.preventDefault();const t=e.target.parentElement.querySelector(".font-card__details");t.classList.toggle("font-card__details--opened"),e.target.classList.toggle("button-accordeon--active"),t.classList.contains("font-card__details--opened")?t.style.maxHeight=`${t.scrollHeight}px`:t.style.maxHeight=null},Oe=()=>{M&&!r.matches&&!I&&(M.forEach(e=>{e.addEventListener("click",he)}),I=!0),M&&r.matches&&I&&(M.forEach(e=>{e.removeEventListener("click",he)}),I=!1)};r.addEventListener("change",()=>{se(),Oe()});ke.addEventListener("change",se);const Fe=(e,t=500)=>{let n;return(...o)=>{clearTimeout(n),n=setTimeout(()=>e.apply(void 0,o),t)}},Le=document.querySelectorAll(".font-card__list"),J=new Map;let D=!1;const lt=()=>{let e=null,t=null,n=0;const o=l=>{if(e=l.target.closest(".font-card__list"),!e)return;t=e.getBoundingClientRect(),n=t.width/3},c=Fe(l=>{if(!e||!t||n===0)return;e.classList.remove("font-card--first","font-card--middle","font-card--last");const f=l.clientX-t.left;f<n?e.classList.add("font-card--first"):f<n*2?e.classList.add("font-card--middle"):e.classList.add("font-card--last")},20);return{onMouseEnter:o,debouncedOnMouseMove:c}},Be=()=>{r.matches&&!D?(Le.forEach(e=>{const t=lt();J.set(e,t),e.addEventListener("mouseenter",t.onMouseEnter),e.addEventListener("mousemove",t.debouncedOnMouseMove)}),D=!0):!r.matches&&D&&(Le.forEach(e=>{const t=J.get(e);t&&(e.removeEventListener("mouseenter",t.onMouseEnter),e.removeEventListener("mousemove",t.debouncedOnMouseMove),J.delete(e))}),D=!1)};r.addEventListener("change",Be);const W=document.querySelector(".best-picks"),O=W?W.querySelectorAll(".font-card:not(.font-card--big) .font-card__content-wrapper"):null,ye=W?W.querySelectorAll(".font-card:not(.font-card--big) .font-card__content"):null;let F=!1;const B=e=>{const t=e.target.querySelector(".font-card__details");t.classList.add("font-card__details--opened"),t.style.maxHeight=`${t.scrollHeight}px`},H=e=>{const t=e.target.querySelector(".font-card__details");t.classList.remove("font-card__details--opened"),t.style.maxHeight=null},He=()=>{O&&r.matches&&!F&&(O.forEach(e=>{e.addEventListener("mouseenter",B),e.addEventListener("mouseleave",H)}),ye.forEach(e=>{e.addEventListener("focus",B),e.addEventListener("focusout",H)}),F=!0),O&&!r.matches&&F&&(O.forEach(e=>{e.removeEventListener("mouseenter",B),e.removeEventListener("mouseleave",H)}),ye.forEach(e=>{e.removeEventListener("focus",B),e.removeEventListener("focusout",H)}),F=!1)};r.addEventListener("change",He);const X=document.querySelector(".best-picks"),h=X?X.querySelector(".select"):null,q=h.querySelector(".select__button"),v=h.querySelector(".select__list"),R=Array.from(v.querySelectorAll("li")),u=Array.from(v.querySelectorAll("button"));let N=!1;const oe=()=>{h.classList.contains("select--open")?u.forEach(e=>{e.setAttribute("tabindex","0")}):u.forEach(e=>{e.setAttribute("tabindex","-1")})},at=()=>{h.classList.add("select--open"),oe(),v.addEventListener("click",Pe),document.addEventListener("keydown",$e),document.addEventListener("click",Ve),v.addEventListener("focusout",We)},S=()=>{h.classList.remove("select--open"),oe(),q.focus(),v.removeEventListener("click",Pe),document.removeEventListener("keydown",$e),document.removeEventListener("click",Ve),v.removeEventListener("focusout",We)},Ne=e=>{const t=e.textContent,n=e.parentElement;R.find(s=>s.getAttribute("aria-selected")==="true").setAttribute("aria-selected","false"),n.setAttribute("aria-selected","true"),q.textContent=t,S()};function $e(e){const t=h.classList.contains("select--open"),n=u.indexOf(document.activeElement);if(t){if(Je(e)){e.preventDefault(),n<u.length-1?u[n+1].focus():u[0].focus();return}if(Qe(e)){e.preventDefault(),n>0?u[n-1].focus():u[u.length-1].focus();return}if(Ze(e)){e.preventDefault(),n>0&&Ne(u[n]);return}xe(e)&&S()}}function Pe(e){e.target.tagName==="BUTTON"&&Ne(e.target)}function Ve(e){h.contains(e.target)||S()}function We(e){(e.relatedTarget===null||!h.contains(e.relatedTarget))&&S()}const Xe=()=>{h.classList.contains("select--open")?S():at()},dt=()=>{v.setAttribute("role","listbox"),v.setAttribute("aria-label","Выберите категорию"),q.textContent=u[0].textContent,q.addEventListener("click",Xe),R.forEach(e=>{e.setAttribute("role","option"),e.setAttribute("aria-selected","false")}),R[0].setAttribute("aria-selected","true"),oe()},ut=()=>{h.classList.contains("select--open")&&S(),u.forEach(e=>{e.setAttribute("tabindex","0")}),R.forEach(e=>{e.removeAttribute("role"),e.removeAttribute("aria-selected")}),q.removeEventListener("click",Xe),v.removeAttribute("role"),v.removeAttribute("aria-label")},Re=()=>{X&&!r.matches&&!N&&(dt(),N=!0),X&&r.matches&&N&&(ut(),N=!1)};r.addEventListener("change",Re);const Ee=document.querySelector(".subscribe"),p=Ee?Ee.querySelector(".subscribe__form"):null,be=p?p.querySelectorAll("input"):null,ft=()=>{const e=()=>{let t=!0;return be.forEach(n=>{const o=n.value.trim();o===""?(n.classList.add("input--error"),n.setCustomValidity(j.empty),t=!1):ae[n.id]&&!ae[n.id].test(o)?(n.classList.add("input--error"),n.setCustomValidity(j[n.id]||j.default),t=!1):n.setCustomValidity("")}),t};p.addEventListener("submit",t=>{t.preventDefault(),e()?(p.submit(),p.reset()):p.reportValidity()}),be.forEach(t=>{t.addEventListener("input",()=>{t.setCustomValidity(" "),t.classList.remove("input--error"),t.blur(),t.focus()})})},pe=document.querySelector(".best-picks"),K=pe?pe.querySelector(".best-picks__view"):null,mt=K?K.querySelectorAll(".best-picks__view-button"):null,vt=()=>{K&&K.addEventListener("click",e=>{e.target.classList.contains("best-picks__view-button")&&(mt.forEach(t=>{t.classList.remove("best-picks__view-button--active")}),e.target.classList.add("best-picks__view-button--active"))})},ge=document.querySelectorAll(".js-accent-list"),ht=()=>{ge&&ge.forEach(e=>{const t=e.querySelectorAll(".link-accent");let n=null,o=!1;const s=()=>{n=e.querySelector(".link-accent--current"),n&&n.classList.remove("link-accent--current")},c=()=>{n&&n.classList.add("link-accent--current")},l=a=>{const y=a.relatedTarget;y&&!e.contains(y)&&s()},f=a=>{const y=a.relatedTarget;(y===null||!e.contains(y))&&c()},_=a=>{n&&n.classList.remove("link-accent--current"),a.target.classList.add("link-accent--current"),n=a.target},A=()=>{n&&n.classList.remove("link-accent--current")},x=()=>{r.matches&&!o&&(e.addEventListener("mouseenter",s),e.addEventListener("mouseleave",c),e.addEventListener("focusin",l),e.addEventListener("focusout",f),t.forEach(a=>{a.addEventListener("mouseenter",A),a.addEventListener("click",_)}),o=!0),!r.matches&&o&&(e.removeEventListener("mouseenter",s),e.removeEventListener("mouseleave",c),e.removeEventListener("focusin",l),e.removeEventListener("focusout",f),t.forEach(a=>{a.removeEventListener("mouseenter",A),a.removeEventListener("click",_)}),o=!1)};x(),r.addEventListener("change",x)})},g=document.querySelector(".footer"),Se=g?g.querySelector(".footer__social"):null,_e=g?g.querySelector(".footer__info"):null;let $=!1;const Ke=()=>{g&&r.matches&&!$&&(_e.appendChild(Se),$=!0),g&&!r.matches&&$&&(_e.prepend(Se),$=!1)};r.addEventListener("change",Ke);const Ae=document.querySelectorAll(".favorites-button"),Lt=()=>{Ae&&Ae.forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("favorites-button--active")})})},te=document.querySelector(".button-scroll-top"),yt=()=>{window.pageYOffset>350?te.classList.add("button-scroll-top--visible"):te.classList.remove("button-scroll-top--visible")},Et=Fe(yt,30),bt=()=>{window.scrollTo({top:0,behavior:"smooth"})},pt=()=>{window.addEventListener("scroll",Et),te.addEventListener("click",bt)};document.addEventListener("DOMContentLoaded",()=>{qe(),ot(),rt(),ct(),it(),se(),Oe(),Be(),He(),Re(),ft(),vt(),ht(),Ke(),Lt(),pt()});
